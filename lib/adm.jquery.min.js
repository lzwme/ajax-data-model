!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("adm",[],t):"object"==typeof exports?exports.adm=t():e.adm=t()}(this,function(){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n,a){var r=(0,u.getPromise)(c["default"].isJquery);if(!e.url||"string"!=typeof e.url)return console.trace("请求 URL API 不存在，或格式不对：",e.url),r.reject("请求 URL API 不存在，或格式不对：",e.url);e.data&&e.data.btnWaiting&&(e.waiting=e.waiting||e.data.btnWaiting,delete e.data.btnWaiting);var i="json";/^https?:\/\//.test(e.url)&&e.url.search(window.location.host)===-1&&(i="jsonp"),c["default"].fnBeforeAjax&&c["default"].fnBeforeAjax(e);var f=void 0;if("object"===o(e.data))for(f in e.data)"string"!=typeof e.data[f]&&(e.data[f]=JSON.stringify(e.data[f]));c["default"].fnWaiting(e);var s=new Date;return $.ajax($.extend(!0,{type:"GET",dataType:i},e.ajaxParam,{url:e.url,data:e.data})).then(function(o){var i=c["default"].fnAjaxDone(o,function(e){a instanceof Function&&a(o),t instanceof Function&&t(e)},n,e);return i?!0===i?r.resolve(o):"function"==typeof i.then?i:r.resolve(i):r.reject(o)},function(t){return c["default"].fnAjaxFail(t,e),n instanceof Function&&n(t),r.reject(t)}).always(function(){c["default"].fnWaiting(e,new Date-s)})}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=n(2),c=a(i),u=n(3);t["default"]={get:function(e,t,n){var a=this;if(e){var o=void 0,i=void 0,f=(0,u.getPromise)(c["default"].isJquery);return(0,u.isString)(e)&&(o=e),e.url?(o=e.cacheName||e.url,i=(0,u.getCacheDataByName)(o,e.fromCache),e.fromCache&&i?(t instanceof Function&&t(i),f.resolve(i),f):(e.ajaxParam=$.extend(e.ajaxParam,{type:"GET"}),r(e,t,n,function(t){e.cache&&a.save(o,t,e.cache)}))):e.hasOwnProperty("url")?(console.trace("配置了 URL 参数，但值为空：",e),f.reject("配置了 URL 参数，但值为空",e),f):(!o&&e&&(o=e.cacheName),i=(0,u.getCacheDataByName)(o,e.fromCache||t),t instanceof Function&&t(i),i)}},save:function(e,t,n){if(!e)return"";var a=void 0,o=void 0,i=(0,u.getPromise)(c["default"].isJquery);if((0,u.isString)(e))a=""+e,t instanceof Function?(0,u.saveTOCache)(a,t(),n):(0,u.saveTOCache)(a,t,n);else{if(e.url)return a=e.cacheName||e.url,o=(0,u.getCacheDataByName)(a,e.fromCache),e.fromCache&&o?(t instanceof Function&&t(o),i.resolve(o),i):(e.ajaxParam=$.extend({type:"POST"},e.ajaxParam),r(e,t,n,function(t){e.cache&&(0,u.saveTOCache)(a,t,e.cache)}));e.hasOwnProperty("url")?(console.trace("配置了 URL 参数，但值为空：",e),i.reject("配置了 URL 参数，但值为空",e)):e.cacheName&&((0,u.saveTOCache)(e.cacheName,e.data,e.cache),t instanceof Function&&t(o))}return i},"delete":function(e,t,n){if(!e)return"";var a=(0,u.getPromise)(c["default"].isJquery),o=void 0;if((0,u.isString)(e)||e instanceof RegExp)(0,u.deleteCacheDataByName)(e,t),a.resolve();else{if(e.url)return r(e,t,n,{type:"DELETE"},function(){e.cache&&(o=e.cacheName||e.url,(0,u.deleteCacheDataByName)(o,e.cache))});e.hasOwnProperty("url")?(console.trace("配置了 URL 参数，但值为空：",e),a.reject("配置了 URL 参数，但值为空",e)):e&&e.cacheName&&((0,u.deleteCacheDataByName)(e.cacheName,e.cache),a.resolve())}return a},getAll:function(e){var t=(0,u.getCacheStor)(e),n={},a=t.length,r=void 0,o=void 0,i=void 0;for(r=0;r<a;r++)if(o=t.key(r),o&&0===o.indexOf(c["default"].cachePrefix)){i=o.replace(c["default"].cachePrefix,"");try{n[i]=JSON.parse(t.getItem(o))}catch(f){n[i]=t.getItem(o)}}return n},getJSON:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments[2],a=arguments[3];return t instanceof Function&&(a=n,n=t),this.get({url:e,data:t},n,a)},post:function(e,t,n,a){return this.save({url:e,data:t},n,a)},clear:function(e){return(0,u.deleteCacheDataByName)(new RegExp(".*"),e),this},setCachePrefix:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];return/^_[_a-zA-Z]*_$/.test(e)?(t&&(this.clear("sessionStorage"),this.clear("localStorage"),this.clear()),c["default"].cachePrefix=e,this):(console.warn("以下划线开头和结尾，由字母、数字、或下划线组成"),this)},setSettings:function(e){var t=void 0;for(t in e)"cachePrefix"===t?this.setCachePrefix(e[t],!1):c["default"].hasOwnProperty(t)&&(c["default"][t]=e[t]);return c["default"]}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={cachePrefix:"__DM__",isJquery:!0,errAlert:!0,errMsg:"",alert:function(e){console.trace(e)},fnWaiting:function(e,t){},fnBeforeAjax:function(e){},fnAjaxDone:function(e,t,n,a){var r=!1;return e&&200===e.code?(t&&t(e),r=!0):(n&&n(e),a.tipConfig!==!1&&(e.message=e.message||"系统错误",this.alert(e.message))),r},fnAjaxFail:function(e,t){var n=e.responseText||e.statusText||"";n.length>300&&(n=n.slice(0,300)+"..."),0===e.status?this.alert("登录超时"):(t.errAlert||void 0===t.errAlert&&this.errAlert)&&this.alert(t.errMsg||this.errMsg||"数据请求失败: "+n)}},e.exports=t["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e){return e?(e=encodeURIComponent((""+e).replace(/\//g,".").replace(/^\./,"").replace(/(^\s+|\s+$)/g,"")),0!==e.indexOf(h["default"].cachePrefix)&&(e=h["default"].cachePrefix+e),e):""}function o(e){var t=m;return"sessionStorage"!==e&&"localStorage"!==e||(t=window[e]||t),t}function i(e,t){var n=void 0,a=o(t);if(!(e=r(e)))return n;try{n=JSON.parse(a.getItem(e))}catch(i){n=a.getItem(e)}return n||void 0}function c(e,t){var n=o(t),a=void 0,i=void 0,c=void 0;if(e instanceof RegExp)for(c=n.length,i=0;i<c;i++)a=n.key(i),a&&0===a.indexOf(h["default"].cachePrefix)&&e.test(a.slice(h["default"].cachePrefix.length))&&n.removeItem(a);else(e=r(e))&&n.removeItem(e)}function u(e,t,n){if(e=r(e)){var a=o(n);a===m?a.setItem(e,t):a.setItem(e,JSON.stringify(t))}}function f(e){var t="undefined"==typeof e?"undefined":l(e);return"string"===t||"number"===t}function s(e){if(e)return $.Deferred();var t=void 0,n=void 0,a=new window.Promise(function(e,a){t=e,n=a});return a.resolve=t,a.reject=n,a.done=function(e){return a.then(e)},a.fail=function(e){return a.then(null,e)},a.always=function(e){return a.then(e,e)},a}Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.getCacheStor=o,t.getCacheDataByName=i,t.deleteCacheDataByName=c,t.saveTOCache=u,t.isString=f,t.getPromise=s;var d=n(2),h=a(d),v=n(4),y=a(v),m=new y["default"]},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(){n(this,e),this.length=0,this.cache={}}return a(e,[{key:"getItem",value:function(e){return this.cache[e]}},{key:"setItem",value:function(e,t){this.cache[e]=t,this.length++}},{key:"removeItem",value:function(e){this.cache.hasOwnProperty(e)&&(this.length--,delete this.cache[e])}},{key:"clear",value:function(){this.length=0,this.cache={}}},{key:"key",value:function t(e){var t=void 0,n=0;for(t in this.cache){if(e===n)return t;n++}return null}}]),e}();t["default"]=r,e.exports=t["default"]}])});
//# sourceMappingURL=adm.jquery.min.js.map