!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("adm",[],t):"object"==typeof exports?exports.adm=t():e.adm=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r){var a=(0,f.getPromise)(u.default.isJquery);if(!e.url||"string"!=typeof e.url)return console.trace("请求 URL API 不存在，或格式不对：",e.url),a.reject("请求 URL API 不存在，或格式不对：",e.url);e.data&&e.data.btnWaiting&&(e.waiting=e.waiting||e.data.btnWaiting,delete e.data.btnWaiting);var o="json";/^https?:\/\//.test(e.url)&&e.url.search(window.location.host)===-1&&(o="jsonp"),u.default.fnBeforeAjax&&u.default.fnBeforeAjax(e);var c=void 0;if("object"===i(e.data))for(c in e.data)"string"!=typeof e.data[c]&&(e.data[c]=JSON.stringify(e.data[c]));u.default.fnWaiting(e);var s=new Date;return $.ajax($.extend(!0,{type:"GET",dataType:o},e.ajaxParam,{url:e.url,data:e.data})).then(function(o){var i=u.default.fnAjaxDone(o,function(e){r instanceof Function&&r(o),t instanceof Function&&t(e)},n,e);return i?!0===i?a.resolve(o):"function"==typeof i.then?i:a.resolve(i):a.reject(o)},function(t){return u.default.fnAjaxFail(t,e),n instanceof Function&&n(t),a.reject(t)}).always(function(){u.default.fnWaiting(e,new Date-s)})}function o(e){if((0,f.isString)(e)||!e)return e;var t=e.cacheName,n=e.data;return t||(t=e.url,"object"===("undefined"==typeof n?"undefined":i(n))&&(t+=JSON.stringify(n))),t}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(2),u=r(c),f=n(3);t.default={get:function(e,t,n){var r=this;if(e){var i=void 0,c=(0,f.getPromise)(u.default.isJquery),s=o(e);return e.url?(i=(0,f.getCacheDataByName)(s,e.fromCache),e.fromCache&&i?("function"==typeof t&&t(i),c.resolve(i),c):(e.ajaxParam=$.extend(e.ajaxParam,{type:"GET"}),a(e,t,n,function(t){e.cache&&r.save(s,t,e)}))):e.hasOwnProperty("url")?(console.trace("配置了 URL 参数，但值为空：",e),c.reject("配置了 URL 参数，但值为空",e),c):(i=(0,f.getCacheDataByName)(s,e.fromCache||t),t instanceof Function&&t(i),i)}},save:function(e,t,n){if(!e)return"";var r=void 0,i=(0,f.getPromise)(u.default.isJquery),c=o(e);if((0,f.isString)(e))t instanceof Function?(0,f.saveTOCache)(c,t(),n):(0,f.saveTOCache)(c,t,n),i.resolve(c);else{if(e.url)return r=(0,f.getCacheDataByName)(c,e.fromCache),e.fromCache&&r?(t instanceof Function&&t(r),i.resolve(r),i):(e.ajaxParam=$.extend({type:"POST"},e.ajaxParam),a(e,t,n,function(t){e.cache&&(0,f.saveTOCache)(c,t,e)}));e.hasOwnProperty("url")?(console.trace("配置了 URL 参数，但值为空：",e),i.reject("配置了 URL 参数，但值为空",e)):c&&((0,f.saveTOCache)(c,e.data,e),t instanceof Function&&t(r),i.resolve(e.data))}return i},delete:function(e,t,n){if(!e)return"";var r=(0,f.getPromise)(u.default.isJquery),i=o(e);if((0,f.isString)(e)||e instanceof RegExp)(0,f.deleteCacheDataByName)(e,t),r.resolve();else{if(e.url)return a(e,t,n,{type:"DELETE"},function(){e.cache&&(0,f.deleteCacheDataByName)(i,e.cache)});e.hasOwnProperty("url")?(console.trace("配置了 URL 参数，但值为空：",e),r.reject("配置了 URL 参数，但值为空",e)):i&&((0,f.deleteCacheDataByName)(i,e.cache),r.resolve())}return r},getAll:function(e){var t=(0,f.getCacheStor)(e),n={},r=t.length,a=void 0,o=void 0,i=void 0;for(a=0;a<r;a++)if(o=t.key(a),o&&0===o.indexOf(u.default.cachePrefix)){i=o.replace(u.default.cachePrefix,"");try{n[i]=JSON.parse(t.getItem(o))}catch(e){n[i]=t.getItem(o)}}return n},getJSON:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],r=arguments[3];return t instanceof Function&&(r=n,n=t,t=void 0),this.get({url:e,data:t},n,r)},post:function(e,t,n,r){return this.save({url:e,data:t},n,r)},clear:function(e){return(0,f.deleteCacheDataByName)(new RegExp(".*"),e),this},setCachePrefix:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return/^_[_a-zA-Z]*_$/.test(e)?(t&&(this.clear("sessionStorage"),this.clear("localStorage"),this.clear()),u.default.cachePrefix=e,this):(console.warn("以下划线开头和结尾，由字母、数字、或下划线组成"),this)},setSettings:function(e){var t=void 0;for(t in e)"cachePrefix"===t?this.setCachePrefix(e[t],!1):u.default.hasOwnProperty(t)&&(u.default[t]=e[t]);return u.default}},e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={cachePrefix:"__DM__",isJquery:!0,errAlert:!0,errMsg:"",alert:function(e){console.trace(e)},fnWaiting:function(e,t){},fnBeforeAjax:function(e){},fnAjaxDone:function(e,t,n,r){var a=!1;return e&&200===e.code?(t&&t(e),a=!0):(n&&n(e),r.tipConfig!==!1&&(e.message=e.message||"系统错误",this.alert(e.message))),a},fnAjaxFail:function(e,t){var n=e.responseText||e.statusText||"";n.length>300&&(n=n.slice(0,300)+"..."),0===e.status?this.alert("登录超时"):(t.errAlert||void 0===t.errAlert&&this.errAlert)&&this.alert(t.errMsg||this.errMsg||"数据请求失败: "+n)}},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return e?e.getTime():(new Date).getTime()}function o(e){return e?(e=encodeURIComponent((""+e).replace(/\//g,".").replace(/^\./,"").replace(/(^\s+|\s+$)/g,"")),e.indexOf(y.default.cachePrefix)&&(e=y.default.cachePrefix+e),e):""}function i(e){var t=g;return~["sessionStorage","localStorage"].indexOf(e)&&(t=window[e]||t),t}function c(e,t){var n=void 0,r=void 0,c=i(t);if(!(e=o(e)))return n;n=c.getItem(e);try{n=JSON.parse(n)}catch(e){n=n}return n&&n._e?a()-n._e<0?n.d:r:n||r}function u(e,t){var n=i(t),r=void 0,a=void 0,c=void 0;if(e instanceof RegExp)for(c=n.length,a=0;a<c;a++)r=n.key(a),r&&0===r.indexOf(y.default.cachePrefix)&&e.test(r.slice(y.default.cachePrefix.length))&&n.removeItem(r);else(e=o(e))&&n.removeItem(e)}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e=o(e)){console.log(e,t,n);var r=n.cache,c=n.expires,u=i(r);+c&&(t={d:t,_e:c instanceof Date?a(c):a()+c}),u===g?u.setItem(e,t):u.setItem(e,JSON.stringify(t))}}function s(e){var t="undefined"==typeof e?"undefined":d(e);return"string"===t||"number"===t}function l(e){if(e)return $.Deferred();var t=void 0,n=void 0,r=new window.Promise(function(e,r){t=e,n=r});return r.resolve=t,r.reject=n,r.done=function(e){return r.then(e)},r.fail=function(e){return r.then(null,e)},r.always=function(e){return r.then(e,e)},r}Object.defineProperty(t,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.getCacheStor=i,t.getCacheDataByName=c,t.deleteCacheDataByName=u,t.saveTOCache=f,t.isString=s,t.getPromise=l;var h=n(2),y=r(h),v=n(4),p=r(v),g=new p.default},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){n(this,e),this.length=0,this.cache={}}return r(e,[{key:"getItem",value:function(e){return this.cache[e]}},{key:"setItem",value:function(e,t){this.cache[e]=t,this.length++}},{key:"removeItem",value:function(e){this.cache.hasOwnProperty(e)&&(this.length--,delete this.cache[e])}},{key:"clear",value:function(){this.length=0,this.cache={}}},{key:"key",value:function e(t){var e=void 0,n=0;for(e in this.cache){if(t===n)return e;n++}return null}}]),e}();t.default=a,e.exports=t.default}])});
//# sourceMappingURL=adm.jquery.min.js.map