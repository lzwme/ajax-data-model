{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///adm.jquery.min.js","webpack:///webpack/bootstrap 374c7b0a0e89db235b2a","webpack:///./src/adm.jquery.js","webpack:///./src/common/settings.js","webpack:///./src/common/cache-helper.js","webpack:///./src/common/DataCache.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","requestAjax","config","callback","errCallback","fnCB","$p","_cacheHelper","getPromise","_settings2","isJquery","url","logTrace","ERRURLMSG","reject","data","btnWaiting","waiting","dataType","test","search","WIN","location","host","fnBeforeAjax","item","_typeof","JSON","stringify","fnWaiting","startTime","Date","$","ajax","extend","type","ajaxParam","then","result","success","fnAjaxDone","res","Function","resolve","err","fnAjaxFail","always","getCacheName","isString","cacheName","dataStr","md5","strData","hasOwnProperty","key","Object","defineProperty","value","Symbol","iterator","constructor","prototype","_settings","window","console","trace","get","_this","cacheData","$promise","getCacheDataByName","fromCache","cache","save","saveTOCache","delete","RegExp","deleteCacheDataByName","getAll","cacheType","cacheStor","getCacheStor","_cache","len","length","i","indexOf","cachePrefix","replace","parse","getItem","e","getJSON","arguments","undefined","post","clear","setCachePrefix","prefix","warn","setSettings","setting","errAlert","errMsg","alert","msg","time","code","tipConfig","message","responseText","statusText","slice","status","getTime","t","adjustCacheName","encodeURIComponent","dataCache","undefinedVal","_e","d","removeItem","cfg","expires","setItem","text","Deferred","Promise","rs","rj","done","cb","fail","_DataCache","_DataCache2","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","DataCache","index","_index"],"mappings":"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","file":"adm.jquery.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"adm\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"adm\"] = factory();\n\telse\n\t\troot[\"adm\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"adm\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"adm\"] = factory();\n\telse\n\t\troot[\"adm\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/**\n\t * @file 全局数据模型 model\n\t * 提供数据的读取、保存/缓存、删除、更新等操作。各模块 model 可继承该模型，以进行模块范围内的数据存取操作。\n\t * @module adm\n\t * @author lzwy0820@qq.com\n\t * @since 2016-03-31\n\t *\n\t * @example\n\t * import adm from 'ajax-data-model';\n\t * const upsModel = $.extend(true, {}, adm, {aa: 'ccc', restapi: {task_type: '/rest/task/type'}});\n\t * // 支持的方法：upsModel.get、upsModel.save、upsModel.delete、upsModel.clear\n\t * // 配置了 url，则都返回 Promise 对象，不管是否缓存\n\t * upsModel.get({url: '/rest/xxx'}).done().fail().then();\n\t * // 保存数据到 localStorage 中\n\t * upsModel.save('appList', [{music: 'test'}], 'localStorage');\n\t * // 通过名字获取，返回存储的数据或者 undefined\n\t * upsModel.get('appList');\n\t * upsModel.get('appList', 'localStorage');\n\t *\n\t * @example\n\t * // 获取 task_type 数据\n\t * const data = {type: 10};\n\t * adm.get({\n\t *     url: upsModel.restapi.task_type,\n\t *     data: data,\n\t *     cache: 'sessionStorage',             // 缓存到 sessionStorage\n\t *     fromCache: 'sessionStorage',         // 获取时优先从 sessionStorage 读取\n\t *     cacheName: 'task_type_' + data.type, // 缓存、从缓存读取时使用的名称\n\t *     expires: 1000 * 60 * 5,              // 数据有效时间为 5 分钟\n\t * }).then((result) => {\n\t *     let taskTypeList = result.value || [];\n\t *     console.log(taskTypeList);\n\t * }, (err) {\n\t *     console.log(err);\n\t * });\n\t */\n\t'use strict';\n\t\n\t// import $ from 'jquery';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _settings = __webpack_require__(2);\n\t\n\tvar _settings2 = _interopRequireDefault(_settings);\n\t\n\tvar _cacheHelper = __webpack_require__(3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// 常量定义\n\tvar WIN = window;\n\tvar logTrace = WIN.console.trace;\n\tvar ERRURLMSG = '配置了 URL 参数，但值为空或类型不对';\n\t\n\t/**\n\t * ajax 请求通用方法\n\t * @param {Object}   config - 请求参数配置\n\t * @param {String}   config.url - ajax url，必须存在，`config.ajaxParam` 中配置此参数无效\n\t * @param {Object}   config.ajaxParam - ajax 额外参数扩展，如涉及文件上传等\n\t * @param {Object}   config.data - ajax 请求的参数\n\t * @param {Object}   config.waiting - 用于传递给 settings.fnWaiting 方法使用的参数配置\n\t * @param {Object}   config.tipConfig[true] - ajax 出错时的提示配置。配置为 false 时，禁用全局的系统提示，包括 成功/出错/404/50x 等\n\t * @param {Object}   config.errAlert[true] - ajax error 时是否给出提示\n\t * @param {Function} callback - ajax 请求成功时回调\n\t * @param {Function} errCallback - ajax 请求失败或 code !== 200 时回调\n\t * @param {Object}   param - 传递给 ajax 请求的额外参数\n\t * @param {Function} fnCB - 请求到数据之后的立即回调方法，用于请求成功后需要前置处理的情况\n\t * @return {Promise}  用于自定义回调处理。\n\t *                    注意：ajax 请求的 done/fail 回调，与 callback/errCallback 可能有区别，具体取决于 fnAjaxDone 与 fnAjaxFail 回调的实现\n\t */\n\tfunction requestAjax(config, callback, errCallback, fnCB) {\n\t    var $p = (0, _cacheHelper.getPromise)(_settings2.default.isJquery);\n\t\n\t    if (!config.url || typeof config.url !== 'string') {\n\t        logTrace(ERRURLMSG, config.url);\n\t        return $p.reject(ERRURLMSG, config.url);\n\t    }\n\t\n\t    // data.btnWaiting 的兼容，应使用 config.waiting 参数\n\t    if (config.data && config.data.btnWaiting) {\n\t        config.waiting = config.waiting || config.data.btnWaiting;\n\t        delete config.data.btnWaiting;\n\t    }\n\t\n\t    // jsonp 兼容\n\t    var dataType = 'json';\n\t\n\t    if (/^https?:\\/\\//.test(config.url) && config.url.search(WIN.location.host) === -1) {\n\t        dataType = 'jsonp';\n\t    }\n\t\n\t    // 请求前回调，可以引用方式修改 config\n\t    if (_settings2.default.fnBeforeAjax) {\n\t        _settings2.default.fnBeforeAjax(config);\n\t    }\n\t\n\t    // 格式化 config.data\n\t    var item = void 0;\n\t\n\t    if ('object' === _typeof(config.data)) {\n\t        for (item in config.data) {\n\t            if ('string' !== typeof config.data[item]) {\n\t                config.data[item] = JSON.stringify(config.data[item]);\n\t            }\n\t        }\n\t    }\n\t\n\t    // ajax 请求前处理，与请求后处理呼应\n\t    _settings2.default.fnWaiting(config);\n\t\n\t    var startTime = new Date();\n\t\n\t    return $.ajax($.extend(true, {\n\t        type: 'GET',\n\t        dataType: dataType\n\t    }, config.ajaxParam, {\n\t        url: config.url,\n\t        data: config.data\n\t    })).then(function (result) {\n\t        var success = _settings2.default.fnAjaxDone(result, function (res) {\n\t            if (fnCB instanceof Function) {\n\t                fnCB(result);\n\t            }\n\t\n\t            if (callback instanceof Function) {\n\t                callback(res);\n\t            }\n\t        }, errCallback, config);\n\t\n\t        // 为 false，设为失败回调\n\t        if (!success) {\n\t            return $p.reject(result);\n\t        }\n\t\n\t        // 为 true\n\t        if (true === success) {\n\t            return $p.resolve(result);\n\t        }\n\t\n\t        // 为 Promise 风格回调\n\t        if ('function' === typeof success.then) {\n\t            // $p = success;\n\t            // return $p;\n\t            return success;\n\t        }\n\t\n\t        // 为其它类型，返回 success 内容\n\t        return $p.resolve(success);\n\t    }, function (err) {\n\t        _settings2.default.fnAjaxFail(err, config);\n\t\n\t        if (errCallback instanceof Function) {\n\t            errCallback(err);\n\t        }\n\t\n\t        return $p.reject(err);\n\t    }).always(function () {\n\t        // ajax 完成后处理\n\t        _settings2.default.fnWaiting(config, new Date() - startTime);\n\t    });\n\t\n\t    // return $p;\n\t}\n\t\n\t// 获取缓存数据的名称 key\n\tfunction getCacheName(config) {\n\t    // 第一个参数为字符串，则为名称，直接返回 config 作为缓存名称\n\t    if ((0, _cacheHelper.isString)(config) || !config) {\n\t        return config;\n\t    }\n\t\n\t    var cacheName = config.cacheName;\n\t    var dataStr = void 0;\n\t    var md5 = WIN.$ && WIN.$.md5 || WIN.md5;\n\t    var data = config.data;\n\t\n\t    if (!cacheName) {\n\t        cacheName = config.url;\n\t\n\t        if (cacheName && (typeof data === 'undefined' ? 'undefined' : _typeof(data)) === 'object') {\n\t            var strData = JSON.stringify(data);\n\t\n\t            if (typeof md5 === 'function') {\n\t                strData = md5(strData);\n\t            }\n\t\n\t            cacheName += dataStr;\n\t        }\n\t    }\n\t\n\t    return cacheName;\n\t}\n\t\n\t// obj 对象中是否包含键为 key 的项\n\tfunction hasOwnProperty(obj, key) {\n\t    return obj.hasOwnProperty(key);\n\t}\n\t\n\t/**\n\t * 全局数据模型 model\n\t * @alias module:adm\n\t * @type {Object}\n\t */\n\texports.default = {\n\t    /**\n\t     * 数据获取，可为远程url、缓存等\n\t     * @param {Object} config 为字符串时，从缓存中读取数据，否则为从远程获取数据，参数如下：\n\t     * ```js\n\t     * {\n\t     *     url: '',          // API url 地址，可为空。为空时应存在 cacheName，此时为从缓存中读取数据\n\t     *     data: {},         // url 请求参数\n\t     *     cache: false,     // 配置了 url 获取数据时，是否缓存数据。可取值：`false/true/sessionStorage/localStorage`\n\t     *     fromCache: false, // 配置了 url，是否首先尝试从缓存中读取数据。可取值：`false/true/sessionStorage/localStorage`\n\t     *     cacheName: '',    // 配置了 url 并且 cache 为 true，配置缓存数据的名称，不配置则取值 url (/ 会替换为 . 作为深度路径)\n\t     *     expires: 0,       // 如果 cache 为 true，设置缓存数据的有效期，可为 毫秒数，或 Date 类型日期\n\t     *     tipConfig: {delay: 2000} // ajax 出错时的提示配置。配置为 false 时，禁用全局的系统提示，包括 成功/出错/404/50x 等\n\t     *     errAlert: true    // ajax error 时是否给出全局提示，优先级高于 settings.errAlert\n\t     *     waiting: {}       // 按钮等待等配置，用于传递给 settings.fnWaiting 方法\n\t     *     ajaxParam: null   // ajax 额外参数扩展，如涉及文件上传等，需要修改部分参数。其中 url 参数无效，应当使用 config.url\n\t     * }\n\t     * ```\n\t     * @param {Object} callback 成功回调方法\n\t     * @param {Object} errCallback 从 url 获取时，失败后需要做一些处理的回调方法\n\t     * }\n\t     */\n\t    get: function get(config, callback, errCallback) {\n\t        var _this = this;\n\t\n\t        if (!config) {\n\t            return undefined;\n\t        }\n\t\n\t        var cacheData = void 0;\n\t        var $promise = (0, _cacheHelper.getPromise)(_settings2.default.isJquery);\n\t        var cacheName = getCacheName(config);\n\t\n\t        // 配置了 url，从 url 中获取\n\t        if (config.url) {\n\t            cacheData = (0, _cacheHelper.getCacheDataByName)(cacheName, config.fromCache);\n\t\n\t            // fromCache 为 true，尝试从缓存中获取数据\n\t            if (config.fromCache && cacheData) {\n\t                if (typeof callback === 'function') {\n\t                    callback(cacheData);\n\t                }\n\t\n\t                $promise.resolve(cacheData);\n\t                // return cacheData; // 返回数据\n\t                return $promise; // 这里改了后不兼容旧的调用，应该注意 bug 的出现！\n\t            }\n\t\n\t            config.ajaxParam = $.extend(config.ajaxParam, {\n\t                type: 'GET'\n\t            });\n\t\n\t            return requestAjax(config, callback, errCallback, function (result) {\n\t                // cache 为 true，缓存数据\n\t                if (config.cache) {\n\t                    _this.save(cacheName, result, config);\n\t                }\n\t            });\n\t        } else if (hasOwnProperty(config, 'url')) {\n\t            // 配置了 url，但 url 值为空\n\t            logTrace(ERRURLMSG, config);\n\t            $promise.reject(ERRURLMSG, config);\n\t        } else {\n\t            // 未配置 url，则必须配置 config.cacheName，或者 config 为字符串(作为cacheName)，此时为从缓存中取得数据\n\t            cacheData = (0, _cacheHelper.getCacheDataByName)(cacheName, config.fromCache || callback);\n\t\n\t            if (callback instanceof Function) {\n\t                callback(cacheData);\n\t            }\n\t\n\t            return cacheData;\n\t        }\n\t\n\t        return $promise;\n\t    },\n\t\n\t    /**\n\t     * 设置/存储数据\n\t     * @param {Object|String} config - 配置信息。也可以为字符串，则为需存储的数据名称。与 {@link module:adm~get} 的 config 参数相同\n\t     * @param {Function|Object} callback - 存储成功后回调方法。当 config 为字符串时，为需存储的数据，或方法执行后返回要存储的数据\n\t     * @param {Function|String} errCallback - 从 url 获取时，失败后需要做一些处理的回调方法。config 为字符串时，为配置信息，如 {cacheType, expires}\n\t     * @example\n\t     * // 存储数据到 localStorage，名称为 testdataName\n\t     * adm.save('testdataName', {test: 1}, 'localStorage');\n\t     * @example\n\t     * // 存储数据到远程，同时将 API 返回的结果存储到 sessionStorage\n\t     * adm.save({url: '/rest/dd', data: {test: 1}, cache: 'sessionStorage'});\n\t     */\n\t    save: function save(config, callback, errCallback) {\n\t        var $promise = (0, _cacheHelper.getPromise)(_settings2.default.isJquery);\n\t        var resolve = $promise.resolve;\n\t        var reject = $promise.reject;\n\t\n\t        if (!config) {\n\t            resolve();\n\t            return $promise;\n\t        }\n\t\n\t        var cacheData = void 0;\n\t        var cacheName = getCacheName(config, true);\n\t\n\t        if ((0, _cacheHelper.isString)(config)) {\n\t            // config 为字符串，则作为cacheName\n\t            if (callback instanceof Function) {\n\t                // 可以存储为回调方法执行后的结果\n\t                (0, _cacheHelper.saveTOCache)(cacheName, callback(), errCallback);\n\t            } else {\n\t                (0, _cacheHelper.saveTOCache)(cacheName, callback, errCallback);\n\t            }\n\t            resolve(cacheName);\n\t        } else if (config.url) {\n\t            // 配置了 url，将数据存储到远程\n\t            cacheData = (0, _cacheHelper.getCacheDataByName)(cacheName, config.fromCache);\n\t\n\t            // fromCache 为 true，尝试从缓存中获取数据\n\t            if (config.fromCache && cacheData) {\n\t                if (callback instanceof Function) {\n\t                    callback(cacheData);\n\t                }\n\t\n\t                resolve(cacheData);\n\t                // return cacheData; // 返回数据\n\t                return $promise; // 这里改了后不兼容旧的调用，应该注意 bug 的出现！\n\t            }\n\t\n\t            config.ajaxParam = $.extend({\n\t                type: 'POST'\n\t            }, config.ajaxParam);\n\t\n\t            return requestAjax(config, callback, errCallback, function (result) {\n\t                if (config.cache) {\n\t                    // 远程存储成功了，本地也需缓存数据时\n\t                    (0, _cacheHelper.saveTOCache)(cacheName, result, config);\n\t                }\n\t            });\n\t        } else if (hasOwnProperty(config, 'url')) {\n\t            // 配置了url，但 url 值为空\n\t            logTrace(ERRURLMSG, config);\n\t            reject(ERRURLMSG, config);\n\t        } else if (cacheName) {\n\t            // 没有设置 url，但设置了 config.cacheName(此时 cacheName=config.cacheName)，则保存数据到本地\n\t            (0, _cacheHelper.saveTOCache)(cacheName, config.data, config);\n\t\n\t            if (callback instanceof Function) {\n\t                callback(cacheData);\n\t            }\n\t            resolve(config.data);\n\t        }\n\t\n\t        return $promise;\n\t    },\n\t\n\t    /**\n\t     * 删除一个数据\n\t     * @param {Object} config - 为字符串时，作为 cacheName 尝试从缓存中删除数据。否则格式如下：\n\t     * ```js\n\t     * {\n\t     *     url: '',       // 配置了 url，从远程删除数据，否则从缓存中删除\n\t     *     cache: false,  // 配置了 url，是否还尝试从缓存中删除数据。可取值：false/true/sessionStorage/localStorage\n\t     *     cacheName: ''  // 从缓存中删除数据时，提供其名称。\n\t     * }\n\t     * ```\n\t     */\n\t    delete: function _delete(config, callback, errCallback) {\n\t        if (!config) {\n\t            return '';\n\t        }\n\t\n\t        var $promise = (0, _cacheHelper.getPromise)(_settings2.default.isJquery);\n\t        var cacheName = getCacheName(config);\n\t\n\t        if ((0, _cacheHelper.isString)(config) || config instanceof RegExp) {\n\t            // 第一个参数为字符串或正则，callback 就是 cacheType\n\t            (0, _cacheHelper.deleteCacheDataByName)(config, callback);\n\t            // 删除完成都返回执行成功\n\t            $promise.resolve();\n\t        } else if (config.url) {\n\t            // 配置了 url，从远程删除数据\n\t            return requestAjax(config, callback, errCallback, {\n\t                type: 'DELETE'\n\t            }, function () {\n\t                if (config.cache) {\n\t                    // 远程删除成功了，本地也需清空时\n\t                    (0, _cacheHelper.deleteCacheDataByName)(cacheName, config.cache);\n\t                }\n\t            });\n\t        } else if (hasOwnProperty(config, 'url')) {\n\t            // 配置了url，但 url 值为空\n\t            logTrace(ERRURLMSG, config);\n\t            $promise.reject(ERRURLMSG, config);\n\t        } else if (cacheName) {\n\t            (0, _cacheHelper.deleteCacheDataByName)(cacheName, config.cache);\n\t            $promise.resolve();\n\t        }\n\t\n\t        return $promise;\n\t    },\n\t\n\t    /**\n\t     * 返回所有存储中的所有数据\n\t     * @param  {String} cacheType 存储的类型：sessionStorage、localStorage 或 memory\n\t     * @return {Object}\n\t     */\n\t    getAll: function getAll(cacheType) {\n\t        var cacheStor = (0, _cacheHelper.getCacheStor)(cacheType);\n\t        var _cache = {};\n\t        var len = cacheStor.length;\n\t        var i = void 0;\n\t        var item = void 0,\n\t            key = void 0;\n\t\n\t        for (i = 0; i < len; i++) {\n\t            item = cacheStor.key(i);\n\t\n\t            if (!item || 0 !== item.indexOf(_settings2.default.cachePrefix)) {\n\t                continue;\n\t            }\n\t\n\t            key = item.replace(_settings2.default.cachePrefix, '');\n\t            try {\n\t                _cache[key] = JSON.parse(cacheStor.getItem(item));\n\t            } catch (e) {\n\t                _cache[key] = cacheStor.getItem(item);\n\t            }\n\t        }\n\t\n\t        return _cache;\n\t    },\n\t\n\t    /**\n\t     * {@link module:dataModel.get} 的 ajax 快捷方法\n\t     * @see  module:dataModel.get\n\t     * @param  {String}   url         url 地址\n\t     * @param  {Object}  data        要传递的参数，可省略\n\t     * @param  {Function} callback    成功回调\n\t     * @param  {Function}   errCallback 失败回调\n\t     * @returns {Promise}\n\t     */\n\t    getJSON: function getJSON(url) {\n\t        var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t        var callback = arguments[2];\n\t        var errCallback = arguments[3];\n\t\n\t        // data 参数可以省略\n\t        if (data instanceof Function) {\n\t            errCallback = callback;\n\t            callback = data;\n\t            data = void 0;\n\t        }\n\t\n\t        return this.get({\n\t            url: url,\n\t            data: data\n\t        }, callback, errCallback);\n\t    },\n\t\n\t    /**\n\t     * {@link module:dataModel.save} 的 ajax 快捷方法\n\t     * @see  module:dataModel.save\n\t     * @param  {String}   url         url 地址\n\t     * @param  {Object}  data        要传递的参数\n\t     * @param  {Function} callback    成功回调\n\t     * @param  {Function}   errCallback 失败回调\n\t     * @returns {Promise}\n\t     */\n\t    post: function post(url, data, callback, errCallback) {\n\t        return this.save({\n\t            url: url,\n\t            data: data\n\t        }, callback, errCallback);\n\t    },\n\t\n\t    /**\n\t     * 根据存储类型清空存储的所有数据\n\t     * @param  {String} cacheType\n\t     * @return {scope} this\n\t     */\n\t    clear: function clear(cacheType) {\n\t        (0, _cacheHelper.deleteCacheDataByName)(new RegExp('.*'), cacheType);\n\t\n\t        return this;\n\t    },\n\t\n\t    /**\n\t     * 修改缓存数据的前缀\n\t     * @param {String} prefix           以下划线开头，由字母、数字、或下划线组成\n\t     * @param {Boolean} clear[=true]    修改前缀前，是否移除已有的数据\n\t     */\n\t    setCachePrefix: function setCachePrefix(prefix) {\n\t        var clear = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\t\n\t        if (!/^_[_a-zA-Z]*_$/.test(prefix)) {\n\t            console.warn('以下划线开头和结尾，由字母、数字、或下划线组成');\n\t            return this;\n\t        }\n\t\n\t        if (clear) {\n\t            this.clear('sessionStorage');\n\t            this.clear('localStorage');\n\t            this.clear();\n\t        }\n\t\n\t        _settings2.default.cachePrefix = prefix;\n\t\n\t        return this;\n\t    },\n\t\n\t    /**\n\t     * 设置配置项\n\t     * @param {Object} setting\n\t     */\n\t    setSettings: function setSettings(setting) {\n\t        var item = void 0;\n\t\n\t        for (item in setting) {\n\t            if ('cachePrefix' === item) {\n\t                this.setCachePrefix(setting[item], false);\n\t            } else if (hasOwnProperty(_settings2.default, item)) {\n\t                _settings2.default[item] = setting[item];\n\t            }\n\t        }\n\t\n\t        return _settings2.default;\n\t    }\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t/**\n\t * @desc 配置信息，可以通过 `adm.setSettings` 方法修改\n\t * @alias settings\n\t * @type {Object}\n\t */\n\texports.default = {\n\t    cachePrefix: '__DM__', // 缓存数据时使用的前缀，用于区别普通数据\n\t    isJquery: true, // 是否使用 jQuery 的 $.Deferred。为 false 则使用 Promise\n\t    errAlert: true, // ajax 出错时是否全局提示，fnAjaxFail 中使用。全局性开关\n\t    errMsg: '', // 系统错误(40x/50x)时的提示信息，为空则使用 err.responseText\n\t    alert: function alert(msg) {\n\t        // 全局性提示方法注册，可根据项目的 alert 组件进行注册\n\t        console.trace(msg);\n\t        // window.alert(msg);\n\t    },\n\t    /**\n\t     * ajax 开始/结束时回调方法\n\t     * 例如单击按钮后，在开始时禁用按钮，结束时恢复它；\n\t     * 再例如，在 ajax 开始时启用页面动画，结束时关闭页面动画。\n\t     * @param  {Object}  config.waiting - 参数内容可根据 `fnWaiting` 具体的处理来设置\n\t     * @param  {Number} time - 存在值时在 ajax 结束调用，值为 ajax 消耗的时间；省略时在 ajax 开始前被调用\n\t     * @return {void}\n\t     */\n\t    fnWaiting: function fnWaiting(config, time) {\n\t        // const waiting = config.waiting;\n\t        // if ('development' === process.env.NODE_ENV && time) {\n\t        //     console.trace('ajax 请求消耗时间：', time);\n\t        // }\n\t        // if (!waiting) {\n\t        //     return;\n\t        // }\n\t        // more...\n\t    },\n\t\n\t    /**\n\t     * ajax 请求开始前回调方法\n\t     * @param  {Object} config - ajax 请求配置，由于是引用传参，可在这里通过修改它实现 mock 数据等功能\n\t     * @return {void}\n\t     */\n\t    fnBeforeAjax: function fnBeforeAjax(config) {},\n\t\n\t    /**\n\t     * 通用 ajax 请求返回时回调方法\n\t     * 对于基于接口的约定，如这里的示例：以 `code` 为 `200` 认为是成功的数据，否则为出错\n\t     * @param {Object} result - ajax 返回的数据结果\n\t     * @param {Function} callback - 成功回调方法\n\t     * @param {Function} errCallback - 出错回调方法\n\t     * @param {Object} config - ajax 请求参数配置，即 `adm.get/save` 的第一个参数\n\t     * @returns {Boolean|Object|Promise} 表示成功或失败，或成功后返回的数据(如对 result 处理后返回)，或 Promise 风格回调\n\t     */\n\t    fnAjaxDone: function fnAjaxDone(result, callback, errCallback, config) {\n\t        var success = false;\n\t\n\t        if (result && result.code === 200) {\n\t            if (callback) {\n\t                callback(result);\n\t            }\n\t\n\t            // code 200 认为成功，否则认为失败\n\t            success = true;\n\t        } else {\n\t            if (errCallback) {\n\t                errCallback(result);\n\t            }\n\t\n\t            // 全局性系统提示，设置为 false，则不提示，适合由用户自定义错误处理的情况\n\t            if (config.tipConfig !== false) {\n\t                result.message = result.message || '系统错误';\n\t                this.alert(result.message);\n\t            }\n\t        }\n\t\n\t        return success;\n\t    },\n\t\n\t    /**\n\t     * ajax 失败回调方法，一般为 30x、40x、50x 或返回格式不对、网络中断等\n\t     * @param  {Object} err\n\t     * @param  {Object} config\n\t     * @return {void}\n\t     */\n\t    fnAjaxFail: function fnAjaxFail(err, config) {\n\t        var msg = err.responseText || err.statusText || '';\n\t\n\t        if (msg.length > 300) {\n\t            msg = msg.slice(0, 300) + '...';\n\t        }\n\t\n\t        if (0 === err.status) {\n\t            this.alert('登录超时');\n\t            // window.location.reload();\n\t        } else if (config.errAlert || void 0 === config.errAlert && this.errAlert) {\n\t            // errAlert = false 时禁止 40x/50x 等错误的全局提示\n\t            this.alert(config.errMsg || this.errMsg || '数据请求失败: ' + msg);\n\t        }\n\t    }\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; /**\n\t                                                                                                                                                                                                                                                                               * cache helper\n\t                                                                                                                                                                                                                                                                               */\n\t\n\t\n\texports.getCacheStor = getCacheStor;\n\texports.getCacheDataByName = getCacheDataByName;\n\texports.deleteCacheDataByName = deleteCacheDataByName;\n\texports.saveTOCache = saveTOCache;\n\texports.isString = isString;\n\texports.getPromise = getPromise;\n\t\n\tvar _settings = __webpack_require__(2);\n\t\n\tvar _settings2 = _interopRequireDefault(_settings);\n\t\n\tvar _DataCache = __webpack_require__(4);\n\t\n\tvar _DataCache2 = _interopRequireDefault(_DataCache);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// 缓存数据对象。为了避免混淆，只缓存至一级结构\n\tvar dataCache = new _DataCache2.default();\n\t\n\t// 获取时间戳\n\tfunction getTime(t) {\n\t    return t ? t.getTime() : new Date().getTime();\n\t}\n\t\n\t/**\n\t * 修正 cacheName\n\t * @param  {String} cacheName 原始的值，可能是任意格式\n\t * @return {String}           修正后的 cacheName，以 cachePrefix 开头\n\t */\n\tfunction adjustCacheName(cacheName) {\n\t    if (!cacheName) {\n\t        return '';\n\t    }\n\t\n\t    cacheName = encodeURIComponent(('' + cacheName).replace(/\\//g, '.').replace(/^\\./, '').replace(/(^\\s+|\\s+$)/g, ''));\n\t    if (cacheName.indexOf(_settings2.default.cachePrefix)) {\n\t        // cacheName.indexOf(settings.cachePrefix) !== 0 加上前缀\n\t        cacheName = _settings2.default.cachePrefix + cacheName;\n\t    }\n\t\n\t    return cacheName;\n\t}\n\t/**\n\t * 根据 cacheType 取得 cacheStorage 对象\n\t * @param  {String} cacheType\n\t * @return {Object}\n\t */\n\tfunction getCacheStor(cacheType) {\n\t    var cacheStor = dataCache;\n\t\n\t    if (~['sessionStorage', 'localStorage'].indexOf(cacheType)) {\n\t        cacheStor = window[cacheType] || cacheStor;\n\t    }\n\t\n\t    return cacheStor;\n\t}\n\t/**\n\t * 根据 cacheName 名称层级获取对应 dataCache 中的缓存数据\n\t * @param  {String} cacheName - 名称，以 . 分割层级，如 ups.pa.query.tags.group\n\t * @param  {String} cacheType - 缓存类型：sessionStorage、localStorage 、 memory(默认)\n\t * @return {*}                  返回读取到的数据\n\t */\n\tfunction getCacheDataByName(cacheName, cacheType) {\n\t    var data = void 0;\n\t    var undefinedVal = void 0;\n\t    var cacheStor = getCacheStor(cacheType);\n\t\n\t    if (!(cacheName = adjustCacheName(cacheName))) {\n\t        return data;\n\t    }\n\t\n\t    data = cacheStor.getItem(cacheName);\n\t    try {\n\t        data = JSON.parse(data);\n\t    } catch (e) {\n\t        data = data;\n\t    }\n\t\n\t    // 缓存的数据设置了有效期 data._e\n\t    if (data && data._e) {\n\t        // console.log(getTime() - data._e, getTime(), data._e);\n\t\n\t        if (getTime() - data._e < 0) {\n\t            return data.d;\n\t        }\n\t        // 已过期，数据无效了，移除它\n\t        cacheStor.removeItem(cacheName);\n\t\n\t        return undefinedVal;\n\t    }\n\t\n\t    return data || undefinedVal;\n\t}\n\t/**\n\t * 根据 cacheName 名称尝试移除缓存中存在的数据\n\t * @param  {String|RegExp}  cacheName - 名称，以 . 分割层级，如 ups.pa.query.tags.group。支持正则匹配\n\t * @param  {String} cacheType - 缓存类型：sessionStorage、localStorage 、 memory(默认)\n\t * @return {*}\n\t */\n\tfunction deleteCacheDataByName(cacheName, cacheType) {\n\t    var cacheStor = getCacheStor(cacheType);\n\t    var item = void 0,\n\t        i = void 0,\n\t        len = void 0;\n\t\n\t    // 为正则，支持模糊删除\n\t    if (cacheName instanceof RegExp) {\n\t        len = cacheStor.length;\n\t\n\t        for (i = 0; i < len; i++) {\n\t            item = cacheStor.key(i);\n\t\n\t            if (!item || // 兼容\n\t            item.indexOf(_settings2.default.cachePrefix) !== 0 || // 过滤前缀\n\t            !cacheName.test(item.slice(_settings2.default.cachePrefix.length)) // 规则检测\n\t            ) {\n\t                    continue;\n\t                }\n\t\n\t            // 符合规则，移除\n\t            cacheStor.removeItem(item);\n\t        }\n\t\n\t        return;\n\t    }\n\t\n\t    // 精确的查找与删除\n\t    if (!(cacheName = adjustCacheName(cacheName))) {\n\t        return;\n\t    }\n\t\n\t    cacheStor.removeItem(cacheName);\n\t}\n\t/**\n\t * 存储数据到本地\n\t * @param {String} cacheName - 用于存储的名称\n\t * @param {*}      data - 任意类型的数据\n\t * @param {String} cacheType - 存储类型，支持三种方式：sessionStorage、localStorage 和内存中(默认)\n\t */\n\tfunction saveTOCache(cacheName, data) {\n\t    var cfg = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t    if (!(cacheName = adjustCacheName(cacheName))) {\n\t        return;\n\t    }\n\t\n\t    // console.log(cacheName, data, cfg);\n\t\n\t    var cacheType = cfg.cache,\n\t        expires = cfg.expires;\n\t\n\t    var cacheStor = getCacheStor(cacheType);\n\t\n\t    // expires 应为毫秒整数\n\t    if (+expires) {\n\t        data = {\n\t            d: data,\n\t            _e: expires instanceof Date ? getTime(expires) : getTime() + expires\n\t        };\n\t    }\n\t\n\t    if (cacheStor === dataCache) {\n\t        // 存到内存 dataCache\n\t        cacheStor.setItem(cacheName, data);\n\t    } else {\n\t        cacheStor.setItem(cacheName, JSON.stringify(data));\n\t    }\n\t}\n\t\n\t/**\n\t * 是否为类字符串\n\t */\n\tfunction isString(text) {\n\t    var type = typeof text === 'undefined' ? 'undefined' : _typeof(text);\n\t\n\t    return 'string' === type || 'number' === type;\n\t}\n\t/**\n\t * 返回包装done/fail API语法糖的 Promise\n\t * @param  {Boolean} isJquery 是否为 jQuery，为true 则返回 $.Deferred\n\t * @return {Promise}\n\t */\n\tfunction getPromise(isJquery) {\n\t    if (isJquery) {\n\t        return $.Deferred();\n\t    }\n\t\n\t    var resolve = void 0,\n\t        reject = void 0;\n\t    var $p = new window.Promise(function (rs, rj) {\n\t        resolve = rs;\n\t        reject = rj;\n\t    });\n\t\n\t    $p.resolve = resolve;\n\t    $p.reject = reject;\n\t\n\t    $p.done = function (cb) {\n\t        return $p.then(cb);\n\t    };\n\t\n\t    $p.fail = function (cb) {\n\t        return $p.then(null, cb);\n\t    };\n\t\n\t    $p.always = function (cb) {\n\t        return $p.then(cb, cb);\n\t    };\n\t\n\t    return $p;\n\t}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t * @file 基本的数据缓存类\n\t */\n\t\n\t/**\n\t * 内存缓存数据对象类，与 `localStorage` API 保持一致\n\t */\n\tvar DataCache = function () {\n\t    function DataCache() {\n\t        _classCallCheck(this, DataCache);\n\t\n\t        this.length = 0;\n\t        this.cache = {};\n\t    }\n\t    /**\n\t     * 获取值\n\t     * @param  {String} key\n\t     * @return {*}\n\t     */\n\t\n\t\n\t    _createClass(DataCache, [{\n\t        key: \"getItem\",\n\t        value: function getItem(key) {\n\t            return this.cache[key];\n\t        }\n\t        /**\n\t         * 设置值\n\t         * @param {String} key\n\t         * @param {*} value\n\t         */\n\t\n\t    }, {\n\t        key: \"setItem\",\n\t        value: function setItem(key, value) {\n\t            if (!this.cache.hasOwnProperty(key)) {\n\t                this.length++;\n\t            }\n\t            this.cache[key] = value;\n\t        }\n\t        /**\n\t         * 删除一个值\n\t         * @param  {String} key\n\t         * @return {void}\n\t         */\n\t\n\t    }, {\n\t        key: \"removeItem\",\n\t        value: function removeItem(key) {\n\t            if (this.cache.hasOwnProperty(key)) {\n\t                this.length--;\n\t                delete this.cache[key];\n\t            }\n\t        }\n\t        /**\n\t         * 清空\n\t         */\n\t\n\t    }, {\n\t        key: \"clear\",\n\t        value: function clear() {\n\t            this.length = 0;\n\t            this.cache = {};\n\t        }\n\t        /**\n\t         * 取得第 index 个数的 key\n\t         * @param  {Number} index\n\t         * @return {*}\n\t         */\n\t\n\t    }, {\n\t        key: \"key\",\n\t        value: function key(index) {\n\t            var key = void 0,\n\t                _index = 0;\n\t\n\t            for (key in this.cache) {\n\t                if (index === _index) {\n\t                    return key;\n\t                }\n\t                _index++;\n\t            }\n\t\n\t            return null;\n\t        }\n\t    }]);\n\t\n\t    return DataCache;\n\t}();\n\t\n\texports.default = DataCache;\n\tmodule.exports = exports['default'];\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// adm.jquery.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 374c7b0a0e89db235b2a","/**\n * @file 全局数据模型 model\n * 提供数据的读取、保存/缓存、删除、更新等操作。各模块 model 可继承该模型，以进行模块范围内的数据存取操作。\n * @module adm\n * @author lzwy0820@qq.com\n * @since 2016-03-31\n *\n * @example\n * import adm from 'ajax-data-model';\n * const upsModel = $.extend(true, {}, adm, {aa: 'ccc', restapi: {task_type: '/rest/task/type'}});\n * // 支持的方法：upsModel.get、upsModel.save、upsModel.delete、upsModel.clear\n * // 配置了 url，则都返回 Promise 对象，不管是否缓存\n * upsModel.get({url: '/rest/xxx'}).done().fail().then();\n * // 保存数据到 localStorage 中\n * upsModel.save('appList', [{music: 'test'}], 'localStorage');\n * // 通过名字获取，返回存储的数据或者 undefined\n * upsModel.get('appList');\n * upsModel.get('appList', 'localStorage');\n *\n * @example\n * // 获取 task_type 数据\n * const data = {type: 10};\n * adm.get({\n *     url: upsModel.restapi.task_type,\n *     data: data,\n *     cache: 'sessionStorage',             // 缓存到 sessionStorage\n *     fromCache: 'sessionStorage',         // 获取时优先从 sessionStorage 读取\n *     cacheName: 'task_type_' + data.type, // 缓存、从缓存读取时使用的名称\n *     expires: 1000 * 60 * 5,              // 数据有效时间为 5 分钟\n * }).then((result) => {\n *     let taskTypeList = result.value || [];\n *     console.log(taskTypeList);\n * }, (err) {\n *     console.log(err);\n * });\n */\n'use strict';\n\n// import $ from 'jquery';\n\nimport settings from './common/settings';\nimport {\n    getCacheStor,\n    deleteCacheDataByName,\n    getCacheDataByName,\n    saveTOCache,\n    isString,\n    getPromise\n} from './common/cache-helper';\n\n// 常量定义\nconst WIN = window;\nconst logTrace = WIN.console.trace;\nconst ERRURLMSG = '配置了 URL 参数，但值为空或类型不对';\n\n/**\n * ajax 请求通用方法\n * @param {Object}   config - 请求参数配置\n * @param {String}   config.url - ajax url，必须存在，`config.ajaxParam` 中配置此参数无效\n * @param {Object}   config.ajaxParam - ajax 额外参数扩展，如涉及文件上传等\n * @param {Object}   config.data - ajax 请求的参数\n * @param {Object}   config.waiting - 用于传递给 settings.fnWaiting 方法使用的参数配置\n * @param {Object}   config.tipConfig[true] - ajax 出错时的提示配置。配置为 false 时，禁用全局的系统提示，包括 成功/出错/404/50x 等\n * @param {Object}   config.errAlert[true] - ajax error 时是否给出提示\n * @param {Function} callback - ajax 请求成功时回调\n * @param {Function} errCallback - ajax 请求失败或 code !== 200 时回调\n * @param {Object}   param - 传递给 ajax 请求的额外参数\n * @param {Function} fnCB - 请求到数据之后的立即回调方法，用于请求成功后需要前置处理的情况\n * @return {Promise}  用于自定义回调处理。\n *                    注意：ajax 请求的 done/fail 回调，与 callback/errCallback 可能有区别，具体取决于 fnAjaxDone 与 fnAjaxFail 回调的实现\n */\nfunction requestAjax(config, callback, errCallback, fnCB) {\n    const $p = getPromise(settings.isJquery);\n\n    if (!config.url || typeof config.url !== 'string') {\n        logTrace(ERRURLMSG, config.url);\n        return $p.reject(ERRURLMSG, config.url);\n    }\n\n    // data.btnWaiting 的兼容，应使用 config.waiting 参数\n    if (config.data && config.data.btnWaiting) {\n        config.waiting = config.waiting || config.data.btnWaiting;\n        delete config.data.btnWaiting;\n    }\n\n    // jsonp 兼容\n    let dataType = 'json';\n\n    if (/^https?:\\/\\//.test(config.url) && config.url.search(WIN.location.host) === -1) {\n        dataType = 'jsonp';\n    }\n\n    // 请求前回调，可以引用方式修改 config\n    if (settings.fnBeforeAjax) {\n        settings.fnBeforeAjax(config);\n    }\n\n    // 格式化 config.data\n    let item;\n\n    if ('object' === typeof config.data) {\n        for (item in config.data) {\n            if ('string' !== typeof config.data[item]) {\n                config.data[item] = JSON.stringify(config.data[item]);\n            }\n        }\n    }\n\n    // ajax 请求前处理，与请求后处理呼应\n    settings.fnWaiting(config);\n\n    const startTime = new Date();\n\n    return $.ajax($.extend(true, {\n        type: 'GET',\n        dataType\n    }, config.ajaxParam, {\n        url: config.url,\n        data: config.data\n    })).then((result) => {\n        const success = settings.fnAjaxDone(result, (res) => {\n            if (fnCB instanceof Function) {\n                fnCB(result);\n            }\n\n            if (callback instanceof Function) {\n                callback(res);\n            }\n        }, errCallback, config);\n\n        // 为 false，设为失败回调\n        if (!success) {\n            return $p.reject(result);\n        }\n\n        // 为 true\n        if (true === success) {\n            return $p.resolve(result);\n        }\n\n        // 为 Promise 风格回调\n        if ('function' === typeof success.then) {\n            // $p = success;\n            // return $p;\n            return success;\n        }\n\n        // 为其它类型，返回 success 内容\n        return $p.resolve(success);\n    }, (err) => {\n        settings.fnAjaxFail(err, config);\n\n        if (errCallback instanceof Function) {\n            errCallback(err);\n        }\n\n        return $p.reject(err);\n    }).always(() => {\n        // ajax 完成后处理\n        settings.fnWaiting(config, new Date() - startTime);\n    });\n\n    // return $p;\n}\n\n// 获取缓存数据的名称 key\nfunction getCacheName(config) {\n    // 第一个参数为字符串，则为名称，直接返回 config 作为缓存名称\n    if (isString(config) || !config) {\n        return config;\n    }\n\n    let cacheName = config.cacheName;\n    let dataStr;\n    const md5 = WIN.$ && WIN.$.md5 || WIN.md5;\n    const data = config.data;\n\n    if (!cacheName) {\n        cacheName = config.url;\n\n        if (cacheName && typeof data === 'object') {\n            let strData = JSON.stringify(data);\n\n            if (typeof md5 === 'function') {\n                strData = md5(strData);\n            }\n\n            cacheName += dataStr;\n        }\n    }\n\n    return cacheName;\n}\n\n// obj 对象中是否包含键为 key 的项\nfunction hasOwnProperty(obj, key) {\n    return obj.hasOwnProperty(key);\n}\n\n/**\n * 全局数据模型 model\n * @alias module:adm\n * @type {Object}\n */\nexport default {\n    /**\n     * 数据获取，可为远程url、缓存等\n     * @param {Object} config 为字符串时，从缓存中读取数据，否则为从远程获取数据，参数如下：\n     * ```js\n     * {\n     *     url: '',          // API url 地址，可为空。为空时应存在 cacheName，此时为从缓存中读取数据\n     *     data: {},         // url 请求参数\n     *     cache: false,     // 配置了 url 获取数据时，是否缓存数据。可取值：`false/true/sessionStorage/localStorage`\n     *     fromCache: false, // 配置了 url，是否首先尝试从缓存中读取数据。可取值：`false/true/sessionStorage/localStorage`\n     *     cacheName: '',    // 配置了 url 并且 cache 为 true，配置缓存数据的名称，不配置则取值 url (/ 会替换为 . 作为深度路径)\n     *     expires: 0,       // 如果 cache 为 true，设置缓存数据的有效期，可为 毫秒数，或 Date 类型日期\n     *     tipConfig: {delay: 2000} // ajax 出错时的提示配置。配置为 false 时，禁用全局的系统提示，包括 成功/出错/404/50x 等\n     *     errAlert: true    // ajax error 时是否给出全局提示，优先级高于 settings.errAlert\n     *     waiting: {}       // 按钮等待等配置，用于传递给 settings.fnWaiting 方法\n     *     ajaxParam: null   // ajax 额外参数扩展，如涉及文件上传等，需要修改部分参数。其中 url 参数无效，应当使用 config.url\n     * }\n     * ```\n     * @param {Object} callback 成功回调方法\n     * @param {Object} errCallback 从 url 获取时，失败后需要做一些处理的回调方法\n     * }\n     */\n    get(config, callback, errCallback) {\n        if (!config) {\n            return undefined;\n        }\n\n        let cacheData;\n        const $promise = getPromise(settings.isJquery);\n        const cacheName = getCacheName(config);\n\n        // 配置了 url，从 url 中获取\n        if (config.url) {\n            cacheData = getCacheDataByName(cacheName, config.fromCache);\n\n            // fromCache 为 true，尝试从缓存中获取数据\n            if (config.fromCache && cacheData) {\n                if (typeof callback === 'function') {\n                    callback(cacheData);\n                }\n\n                $promise.resolve(cacheData);\n                // return cacheData; // 返回数据\n                return $promise; // 这里改了后不兼容旧的调用，应该注意 bug 的出现！\n            }\n\n            config.ajaxParam = $.extend(config.ajaxParam, {\n                type: 'GET'\n            });\n\n            return requestAjax(config, callback, errCallback, (result) => {\n                // cache 为 true，缓存数据\n                if (config.cache) {\n                    this.save(cacheName, result, config);\n                }\n            });\n        } else if (hasOwnProperty(config, 'url')) { // 配置了 url，但 url 值为空\n            logTrace(ERRURLMSG, config);\n            $promise.reject(ERRURLMSG, config);\n        } else {\n            // 未配置 url，则必须配置 config.cacheName，或者 config 为字符串(作为cacheName)，此时为从缓存中取得数据\n            cacheData = getCacheDataByName(cacheName, config.fromCache || callback);\n\n            if (callback instanceof Function) {\n                callback(cacheData);\n            }\n\n            return cacheData;\n        }\n\n        return $promise;\n    },\n    /**\n     * 设置/存储数据\n     * @param {Object|String} config - 配置信息。也可以为字符串，则为需存储的数据名称。与 {@link module:adm~get} 的 config 参数相同\n     * @param {Function|Object} callback - 存储成功后回调方法。当 config 为字符串时，为需存储的数据，或方法执行后返回要存储的数据\n     * @param {Function|String} errCallback - 从 url 获取时，失败后需要做一些处理的回调方法。config 为字符串时，为配置信息，如 {cacheType, expires}\n     * @example\n     * // 存储数据到 localStorage，名称为 testdataName\n     * adm.save('testdataName', {test: 1}, 'localStorage');\n     * @example\n     * // 存储数据到远程，同时将 API 返回的结果存储到 sessionStorage\n     * adm.save({url: '/rest/dd', data: {test: 1}, cache: 'sessionStorage'});\n     */\n    save(config, callback, errCallback) {\n        const $promise = getPromise(settings.isJquery);\n        const resolve = $promise.resolve;\n        const reject = $promise.reject;\n\n        if (!config) {\n            resolve();\n            return $promise;\n        }\n\n        let cacheData;\n        const cacheName = getCacheName(config, true);\n\n        if (isString(config)) { // config 为字符串，则作为cacheName\n            if (callback instanceof Function) { // 可以存储为回调方法执行后的结果\n                saveTOCache(cacheName, callback(), errCallback);\n            } else {\n                saveTOCache(cacheName, callback, errCallback);\n            }\n            resolve(cacheName);\n        } else if (config.url) { // 配置了 url，将数据存储到远程\n            cacheData = getCacheDataByName(cacheName, config.fromCache);\n\n            // fromCache 为 true，尝试从缓存中获取数据\n            if (config.fromCache && cacheData) {\n                if (callback instanceof Function) {\n                    callback(cacheData);\n                }\n\n                resolve(cacheData);\n                // return cacheData; // 返回数据\n                return $promise; // 这里改了后不兼容旧的调用，应该注意 bug 的出现！\n            }\n\n            config.ajaxParam = $.extend({\n                type: 'POST'\n            }, config.ajaxParam);\n\n            return requestAjax(config, callback, errCallback, (result) => {\n                if (config.cache) {\n                    // 远程存储成功了，本地也需缓存数据时\n                    saveTOCache(cacheName, result, config);\n                }\n            });\n        } else if (hasOwnProperty(config, 'url')) { // 配置了url，但 url 值为空\n            logTrace(ERRURLMSG, config);\n            reject(ERRURLMSG, config);\n        } else if (cacheName) { // 没有设置 url，但设置了 config.cacheName(此时 cacheName=config.cacheName)，则保存数据到本地\n            saveTOCache(cacheName, config.data, config);\n\n            if (callback instanceof Function) {\n                callback(cacheData);\n            }\n            resolve(config.data);\n        }\n\n        return $promise;\n    },\n    /**\n     * 删除一个数据\n     * @param {Object} config - 为字符串时，作为 cacheName 尝试从缓存中删除数据。否则格式如下：\n     * ```js\n     * {\n     *     url: '',       // 配置了 url，从远程删除数据，否则从缓存中删除\n     *     cache: false,  // 配置了 url，是否还尝试从缓存中删除数据。可取值：false/true/sessionStorage/localStorage\n     *     cacheName: ''  // 从缓存中删除数据时，提供其名称。\n     * }\n     * ```\n     */\n    delete(config, callback, errCallback) {\n        if (!config) {\n            return '';\n        }\n\n        const $promise = getPromise(settings.isJquery);\n        const cacheName = getCacheName(config);\n\n        if (isString(config) || config instanceof RegExp) {\n            // 第一个参数为字符串或正则，callback 就是 cacheType\n            deleteCacheDataByName(config, callback);\n            // 删除完成都返回执行成功\n            $promise.resolve();\n        } else if (config.url) {\n            // 配置了 url，从远程删除数据\n            return requestAjax(config, callback, errCallback, {\n                type: 'DELETE'\n            }, () => {\n                if (config.cache) {\n                    // 远程删除成功了，本地也需清空时\n                    deleteCacheDataByName(cacheName, config.cache);\n                }\n            });\n        } else if (hasOwnProperty(config, 'url')) { // 配置了url，但 url 值为空\n            logTrace(ERRURLMSG, config);\n            $promise.reject(ERRURLMSG, config);\n        } else if (cacheName) {\n            deleteCacheDataByName(cacheName, config.cache);\n            $promise.resolve();\n        }\n\n        return $promise;\n    },\n    /**\n     * 返回所有存储中的所有数据\n     * @param  {String} cacheType 存储的类型：sessionStorage、localStorage 或 memory\n     * @return {Object}\n     */\n    getAll(cacheType) {\n        const cacheStor = getCacheStor(cacheType);\n        const _cache = {};\n        const len = cacheStor.length;\n        let i;\n        let item, key;\n\n        for (i = 0; i < len; i++) {\n            item = cacheStor.key(i);\n\n            if (!item || 0 !== item.indexOf(settings.cachePrefix)) {\n                continue;\n            }\n\n            key = item.replace(settings.cachePrefix, '');\n            try {\n                _cache[key] = JSON.parse(cacheStor.getItem(item));\n            } catch (e) {\n                _cache[key] = cacheStor.getItem(item);\n            }\n        }\n\n        return _cache;\n    },\n    /**\n     * {@link module:dataModel.get} 的 ajax 快捷方法\n     * @see  module:dataModel.get\n     * @param  {String}   url         url 地址\n     * @param  {Object}  data        要传递的参数，可省略\n     * @param  {Function} callback    成功回调\n     * @param  {Function}   errCallback 失败回调\n     * @returns {Promise}\n     */\n    getJSON(url, data = {}, callback, errCallback) {\n        // data 参数可以省略\n        if (data instanceof Function) {\n            errCallback = callback;\n            callback = data;\n            data = void 0;\n        }\n\n        return this.get({\n            url,\n            data\n        }, callback, errCallback);\n    },\n    /**\n     * {@link module:dataModel.save} 的 ajax 快捷方法\n     * @see  module:dataModel.save\n     * @param  {String}   url         url 地址\n     * @param  {Object}  data        要传递的参数\n     * @param  {Function} callback    成功回调\n     * @param  {Function}   errCallback 失败回调\n     * @returns {Promise}\n     */\n    post(url, data, callback, errCallback) {\n        return this.save({\n            url,\n            data\n        }, callback, errCallback);\n    },\n    /**\n     * 根据存储类型清空存储的所有数据\n     * @param  {String} cacheType\n     * @return {scope} this\n     */\n    clear(cacheType) {\n        deleteCacheDataByName(new RegExp('.*'), cacheType);\n\n        return this;\n    },\n    /**\n     * 修改缓存数据的前缀\n     * @param {String} prefix           以下划线开头，由字母、数字、或下划线组成\n     * @param {Boolean} clear[=true]    修改前缀前，是否移除已有的数据\n     */\n    setCachePrefix(prefix, clear = true) {\n        if (!/^_[_a-zA-Z]*_$/.test(prefix)) {\n            console.warn('以下划线开头和结尾，由字母、数字、或下划线组成');\n            return this;\n        }\n\n        if (clear) {\n            this.clear('sessionStorage');\n            this.clear('localStorage');\n            this.clear();\n        }\n\n        settings.cachePrefix = prefix;\n\n        return this;\n    },\n    /**\n     * 设置配置项\n     * @param {Object} setting\n     */\n    setSettings(setting) {\n        let item;\n\n        for (item in setting) {\n            if ('cachePrefix' === item) {\n                this.setCachePrefix(setting[item], false);\n            } else if (hasOwnProperty(settings, item)) {\n                settings[item] = setting[item];\n            }\n        }\n\n        return settings;\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/adm.jquery.js","/**\n * @desc 配置信息，可以通过 `adm.setSettings` 方法修改\n * @alias settings\n * @type {Object}\n */\nexport default {\n    cachePrefix: '__DM__', // 缓存数据时使用的前缀，用于区别普通数据\n    isJquery: true, // 是否使用 jQuery 的 $.Deferred。为 false 则使用 Promise\n    errAlert: true, // ajax 出错时是否全局提示，fnAjaxFail 中使用。全局性开关\n    errMsg: '',     // 系统错误(40x/50x)时的提示信息，为空则使用 err.responseText\n    alert: (msg) => { // 全局性提示方法注册，可根据项目的 alert 组件进行注册\n        console.trace(msg);\n        // window.alert(msg);\n    },\n    /**\n     * ajax 开始/结束时回调方法\n     * 例如单击按钮后，在开始时禁用按钮，结束时恢复它；\n     * 再例如，在 ajax 开始时启用页面动画，结束时关闭页面动画。\n     * @param  {Object}  config.waiting - 参数内容可根据 `fnWaiting` 具体的处理来设置\n     * @param  {Number} time - 存在值时在 ajax 结束调用，值为 ajax 消耗的时间；省略时在 ajax 开始前被调用\n     * @return {void}\n     */\n    fnWaiting(config, time) {\n        // const waiting = config.waiting;\n        // if ('development' === process.env.NODE_ENV && time) {\n        //     console.trace('ajax 请求消耗时间：', time);\n        // }\n        // if (!waiting) {\n        //     return;\n        // }\n        // more...\n    },\n    /**\n     * ajax 请求开始前回调方法\n     * @param  {Object} config - ajax 请求配置，由于是引用传参，可在这里通过修改它实现 mock 数据等功能\n     * @return {void}\n     */\n    fnBeforeAjax(config) {},\n    /**\n     * 通用 ajax 请求返回时回调方法\n     * 对于基于接口的约定，如这里的示例：以 `code` 为 `200` 认为是成功的数据，否则为出错\n     * @param {Object} result - ajax 返回的数据结果\n     * @param {Function} callback - 成功回调方法\n     * @param {Function} errCallback - 出错回调方法\n     * @param {Object} config - ajax 请求参数配置，即 `adm.get/save` 的第一个参数\n     * @returns {Boolean|Object|Promise} 表示成功或失败，或成功后返回的数据(如对 result 处理后返回)，或 Promise 风格回调\n     */\n    fnAjaxDone(result, callback, errCallback, config) {\n        let success = false;\n\n        if (result && result.code === 200) {\n            if (callback) {\n                callback(result);\n            }\n\n            // code 200 认为成功，否则认为失败\n            success = true;\n        } else {\n            if (errCallback) {\n                errCallback(result);\n            }\n\n            // 全局性系统提示，设置为 false，则不提示，适合由用户自定义错误处理的情况\n            if (config.tipConfig !== false) {\n                result.message = result.message || '系统错误';\n                this.alert(result.message);\n            }\n        }\n\n        return success;\n    },\n    /**\n     * ajax 失败回调方法，一般为 30x、40x、50x 或返回格式不对、网络中断等\n     * @param  {Object} err\n     * @param  {Object} config\n     * @return {void}\n     */\n    fnAjaxFail(err, config) {\n        let msg = err.responseText || err.statusText || '';\n\n        if (msg.length > 300) {\n            msg = msg.slice(0, 300) + '...';\n        }\n\n        if (0 === err.status) {\n            this.alert('登录超时');\n            // window.location.reload();\n        } else if (config.errAlert || (void 0) === config.errAlert && this.errAlert) {\n            // errAlert = false 时禁止 40x/50x 等错误的全局提示\n            this.alert(config.errMsg || this.errMsg || ('数据请求失败: ' + msg));\n        }\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/settings.js","/**\n * cache helper\n */\nimport settings from './settings';\nimport DataCache from './DataCache';\n\n// 缓存数据对象。为了避免混淆，只缓存至一级结构\nconst dataCache = new DataCache();\n\n// 获取时间戳\nfunction getTime(t) {\n    return t ? t.getTime() : (new Date()).getTime();\n}\n\n/**\n * 修正 cacheName\n * @param  {String} cacheName 原始的值，可能是任意格式\n * @return {String}           修正后的 cacheName，以 cachePrefix 开头\n */\nfunction adjustCacheName(cacheName) {\n    if (!cacheName) {\n        return '';\n    }\n\n    cacheName = encodeURIComponent(('' + cacheName).replace(/\\//g, '.').replace(/^\\./, '').replace(/(^\\s+|\\s+$)/g, ''));\n    if (cacheName.indexOf(settings.cachePrefix)) {\n        // cacheName.indexOf(settings.cachePrefix) !== 0 加上前缀\n        cacheName = settings.cachePrefix + cacheName;\n    }\n\n    return cacheName;\n}\n/**\n * 根据 cacheType 取得 cacheStorage 对象\n * @param  {String} cacheType\n * @return {Object}\n */\nexport function getCacheStor(cacheType) {\n    let cacheStor = dataCache;\n\n    if (~['sessionStorage', 'localStorage'].indexOf(cacheType)) {\n        cacheStor = window[cacheType] || cacheStor;\n    }\n\n    return cacheStor;\n}\n/**\n * 根据 cacheName 名称层级获取对应 dataCache 中的缓存数据\n * @param  {String} cacheName - 名称，以 . 分割层级，如 ups.pa.query.tags.group\n * @param  {String} cacheType - 缓存类型：sessionStorage、localStorage 、 memory(默认)\n * @return {*}                  返回读取到的数据\n */\nexport function getCacheDataByName(cacheName, cacheType) {\n    let data;\n    const undefinedVal = void 0;\n    const cacheStor = getCacheStor(cacheType);\n\n    if (!(cacheName = adjustCacheName(cacheName))) {\n        return data;\n    }\n\n    data = cacheStor.getItem(cacheName);\n    try {\n        data = JSON.parse(data);\n    } catch (e) {\n        data = data;\n    }\n\n    // 缓存的数据设置了有效期 data._e\n    if (data && data._e) {\n        // console.log(getTime() - data._e, getTime(), data._e);\n\n        if (getTime() - data._e < 0) {\n            return data.d;\n        }\n        // 已过期，数据无效了，移除它\n        cacheStor.removeItem(cacheName);\n\n        return undefinedVal;\n    }\n\n    return data || undefinedVal;\n}\n/**\n * 根据 cacheName 名称尝试移除缓存中存在的数据\n * @param  {String|RegExp}  cacheName - 名称，以 . 分割层级，如 ups.pa.query.tags.group。支持正则匹配\n * @param  {String} cacheType - 缓存类型：sessionStorage、localStorage 、 memory(默认)\n * @return {*}\n */\nexport function deleteCacheDataByName(cacheName, cacheType) {\n    const cacheStor = getCacheStor(cacheType);\n    let item,\n        i,\n        len;\n\n    // 为正则，支持模糊删除\n    if (cacheName instanceof RegExp) {\n        len = cacheStor.length;\n\n        for (i = 0; i < len; i++) {\n            item = cacheStor.key(i);\n\n            if (\n                !item || // 兼容\n                item.indexOf(settings.cachePrefix) !== 0 || // 过滤前缀\n                !cacheName.test(item.slice(settings.cachePrefix.length)) // 规则检测\n            ) {\n                continue;\n            }\n\n            // 符合规则，移除\n            cacheStor.removeItem(item);\n        }\n\n        return;\n    }\n\n    // 精确的查找与删除\n    if (!(cacheName = adjustCacheName(cacheName))) {\n        return;\n    }\n\n    cacheStor.removeItem(cacheName);\n}\n/**\n * 存储数据到本地\n * @param {String} cacheName - 用于存储的名称\n * @param {*}      data - 任意类型的数据\n * @param {String} cacheType - 存储类型，支持三种方式：sessionStorage、localStorage 和内存中(默认)\n */\nexport function saveTOCache(cacheName, data, cfg = {}) {\n    if (!(cacheName = adjustCacheName(cacheName))) {\n        return;\n    }\n\n    // console.log(cacheName, data, cfg);\n\n    const {cache: cacheType, expires} = cfg;\n    const cacheStor = getCacheStor(cacheType);\n\n    // expires 应为毫秒整数\n    if (+expires) {\n        data = {\n            d: data,\n            _e: (expires instanceof Date) ? getTime(expires) : (getTime() + expires)\n        };\n    }\n\n    if (cacheStor === dataCache) {\n        // 存到内存 dataCache\n        cacheStor.setItem(cacheName, data);\n    } else {\n        cacheStor.setItem(cacheName, JSON.stringify(data));\n    }\n}\n\n/**\n * 是否为类字符串\n */\nexport function isString(text) {\n    const type = typeof text;\n\n    return 'string' === type || 'number' === type;\n}\n/**\n * 返回包装done/fail API语法糖的 Promise\n * @param  {Boolean} isJquery 是否为 jQuery，为true 则返回 $.Deferred\n * @return {Promise}\n */\nexport function getPromise(isJquery) {\n    if (isJquery) {\n        return $.Deferred();\n    }\n\n    let resolve, reject;\n    const $p = new window.Promise((rs, rj) => {\n        resolve = rs;\n        reject = rj;\n    });\n\n    $p.resolve = resolve;\n    $p.reject = reject;\n\n    $p.done = function (cb) {\n        return $p.then(cb);\n    };\n\n    $p.fail = function (cb) {\n        return $p.then(null, cb);\n    };\n\n    $p.always = function (cb) {\n        return $p.then(cb, cb);\n    };\n\n    return $p;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/cache-helper.js","/**\n * @file 基本的数据缓存类\n */\n\n/**\n * 内存缓存数据对象类，与 `localStorage` API 保持一致\n */\nclass DataCache {\n    constructor() {\n        this.length = 0;\n        this.cache = {};\n    }\n    /**\n     * 获取值\n     * @param  {String} key\n     * @return {*}\n     */\n    getItem(key) {\n        return this.cache[key];\n    }\n    /**\n     * 设置值\n     * @param {String} key\n     * @param {*} value\n     */\n    setItem(key, value) {\n        if (!this.cache.hasOwnProperty(key)) {\n            this.length++;\n        }\n        this.cache[key] = value;\n    }\n    /**\n     * 删除一个值\n     * @param  {String} key\n     * @return {void}\n     */\n    removeItem(key) {\n        if (this.cache.hasOwnProperty(key)) {\n            this.length--;\n            delete this.cache[key];\n        }\n    }\n    /**\n     * 清空\n     */\n    clear() {\n        this.length = 0;\n        this.cache = {};\n    }\n    /**\n     * 取得第 index 个数的 key\n     * @param  {Number} index\n     * @return {*}\n     */\n    key(index) {\n        let key, _index = 0;\n\n        for (key in this.cache) {\n            if (index === _index) {\n                return key;\n            }\n            _index++;\n        }\n\n        return null;\n    }\n}\n\nexport default DataCache;\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/DataCache.js"],"sourceRoot":""}